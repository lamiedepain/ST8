<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ST8 â€¢ STATS (ConnectÃ© au Planning)</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="stats.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="wrap">
    <header class="card">
      <h1>ST8 â€¢ Statistiques</h1>
      <div class="controls">
        <select id="yearSelect"></select>
        <select id="monthSelect"></select>
        <select id="groupSelect"></select>
        <button id="refreshBtn">ğŸ”„ Actualiser</button>
      </div>
    </header>

    <section class="card panel">
      <h2>ğŸ“ˆ Taux de prÃ©sence â€” Ã©volution mensuelle</h2>
      <div class="legend">
        <span class="chip"><span class="dot" style="background:#22c55e"></span>â‰¥ 90% (bon)</span>
        <span class="chip"><span class="dot" style="background:#eab308"></span>60â€“89% (correct)</span>
        <span class="chip"><span class="dot" style="background:#f97316"></span>50â€“59% (vigilance)</span>
        <span class="chip"><span class="dot" style="background:#ef4444"></span>< 50% (alerte)</span>
      </div>
      <div class="kpi" id="kpiBar">
        <div class="item"><div class="muted">Moyenne annuelle</div><b id="kpiAvg">â€”</b></div>
        <div class="item"><div class="muted">Meilleur mois</div><b id="kpiBest">â€”</b></div>
        <div class="item"><div class="muted">Plus faible mois</div><b id="kpiWorst">â€”</b></div>
      </div>
      <canvas id="lineChart"></canvas>
    </section>

    <div class="grid" style="margin-top:16px">
      <section class="card panel">
        <h2>ğŸ§© RÃ©partition des statuts â€” <span id="titleMonth"></span></h2>
        <canvas id="pieChart"></canvas>
      </section>

      <section class="card panel">
        <h2>ğŸ“ Rapport</h2>
        <div class="report" id="reportBox">Chargementâ€¦</div>
        <div class="kpi" style="margin-top:12px">
          <div class="item"><div class="muted">PrÃ©sence</div><b id="rPres">â€”</b></div>
          <div class="item"><div class="muted">Absences (hors astreinte)</div><b id="rAbs">â€”</b></div>
          <div class="item"><div class="muted">Astreintes</div><b id="rAst">â€”</b></div>
        </div>
      </section>
    </div>

    <section class="card panel" style="margin-top:16px">
      <h2>ğŸ“‹ DÃ©tail des catÃ©gories (mois courant)</h2>
      <div id="tableBox" class="muted">â€”</div>
    </section>
  </div>
</body>
</html>
